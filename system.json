{
  "type": "v1/system",

  "components": {
    "api": {
      "type": "v1/service",
      "description": "Backend API for status dashboard app",

      "ports": { "12345": { "protocol": "HTTP" } },

      "build": {
        "git_repository": {
          "url": "git@github.com:mlab-lattice/status-dashboard.git",
          "commit": "93ef8d5ff5beffebd726f5a4079cca598d35f3bf",
          "ssh_key": "/:git-ssh-key"
        },
        "language": "node:boron",
        "command": ["cd api && npm install"]
      },

      "exec": {
        "command": [
          "node",
          "./api/bin/status-dashboard-api"
        ],
        "environment": {
          "LATTICE_STATUS_DASHBOARD_USERNAME": { "secret": "/:username" },
          "LATTICE_STATUS_DASHBOARD_PASSWORD": { "secret": "/:password" },
          "LATTICE_STATUS_DASHBOARD_CONCOURSE_USERNAME": { "secret": "/:concourse-username" },
          "LATTICE_STATUS_DASHBOARD_CONCOURSE_PASSWORD": { "secret": "/:concourse-password" },
          "LATTICE_STATUS_DASHBOARD_GITHUB_TOKEN": { "secret": "/:github-token" }
        }
      },

      "num_instances": 1,
      "node_pool": { "instance_type": "t2.small", "num_instances": 1 }
    }
  }
}
